<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NJPourDigital - Marketing Agency Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and Babel for running JSX in the browser -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="manifest.json">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        .modal { display: none; }
        .modal.active { display: flex; }

        /* Page transition */
        .animate-page-in {
            animation: page-in 0.4s ease-out forwards;
        }
        @keyframes page-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .star-rating input { display: none; }
        .star-rating label { font-size: 2rem; color: #d1d5db; cursor: pointer; }
        .star-rating input:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label { color: #f59e0b; } /* This is a nice gold color */
        .input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        .input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #d97706; /* amber-600 */
            box-shadow: 0 0 0 2px #d97706;
        }
        /* Splash Screen Styles */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0d1f3c;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out;
        }
        #splash-screen img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        #splash-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-800">

    <!-- Splash Screen Element -->
    <div id="splash-screen">
        <img src="https://i.ibb.co/1YkR7Fdb/real-splash-wwith-logo-2.png" alt="NJPourDigital Splash Screen" />
    </div>

    <div id="app-root">
        <!-- App content will be rendered here by React -->
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // --- APP CONFIGURATION (ASSETS) ---
        // The App Icon URL will be used in the final native build configuration.
        const APP_ICON_URL = "https://i.ibb.co/RkBKfX4m/logo-square.png";

        // --- SINGLE SOURCE OF TRUTH (DATABASE) ---
        const initialServices = [
            { id: 'serv_01', name: "AI-Powered Mobile Apps", category: 'Development', price: 15000, priceType: 'project', imageUrl: 'https://placehold.co/400x400/0d1f3c/FFFFFF?text=App+Dev', description: "Engage customers with a stunning, AI-enhanced mobile app, just like the one you're using now." },
            { id: 'serv_02', name: 'Strategic Content Creation', category: 'Marketing', price: 2500, priceType: 'monthly', imageUrl: 'https://placehold.co/400x400/047857/FFFFFF?text=Content', description: 'High-quality blog posts, social media content, and video scripts that resonate with your audience.' },
            { id: 'serv_03', name: 'Digital Ad Campaigns', category: 'Advertising', price: 5000, priceType: 'monthly', imageUrl: 'https://placehold.co/400x400/BE185D/FFFFFF?text=Ads', description: 'Targeted ad campaigns on Google, Meta, and TikTok to maximize your ROI.' },
            { id: 'serv_04', name: 'Brand Identity & Design', category: 'Branding', price: 4500, priceType: 'project', imageUrl: 'https://placehold.co/400x400/7C3AED/FFFFFF?text=Branding', description: 'A complete branding package, including logo design, style guides, and marketing materials.' },
        ];

        const initialPackages = [
            { id: 'pkg_01', name: 'The Seed', price: 1500, tagline: 'For new businesses breaking ground.', features: ['Social Media Management (2 platforms)', 'Basic Content Creation (8 posts/mo)', 'Monthly Performance Report'], color: 'bg-green-100', textColor: 'text-green-800' },
            { id: 'pkg_02', name: 'The Sprout', price: 3000, tagline: 'For growing businesses ready to flourish.', features: ['Everything in The Seed', 'SEO & Keyword Optimization', 'Email Marketing Campaign (1/mo)', 'Bi-weekly Strategy Calls'], color: 'bg-amber-100', textColor: 'text-amber-800' },
            { id: 'pkg_03', name: 'The Vine', price: 5500, tagline: 'For established businesses reaching new heights.', features: ['Everything in The Sprout', 'Custom App Dev or Maintenance', 'Digital Ad Management', 'Advanced Analytics & A/B Testing'], color: 'bg-indigo-100', textColor: 'text-indigo-800' },
        ];

        const initialCaseStudies = [
            { id: 'cs_01', name: 'NJ Pour: Retail App', description: 'A feature-rich mobile app for a local liquor store, boosting sales and customer loyalty.', imageUrl: 'https://placehold.co/600x400/d97706/FFFFFF?text=NJ+Pour+App', process: '1. Discovery & Strategy\n2. UI/UX Design\n3. React Development\n4. AI Integration\n5. Launch & Support', servicesUsedIds: ['serv_01', 'serv_04'] },
            { id: 'cs_02', name: 'East Brunswick Eatery\'s Digital Transformation', description: 'A content and branding strategy that increased online orders by 40% in 6 months.', imageUrl: 'https://placehold.co/600x400/16A34A/FFFFFF?text=Eatery+Growth', process: '1. Brand Refresh & Style Guide\n2. Photoshoot & Content Creation\n3. Social Media Campaign Launch\n4. Targeted Local Ads\n5. Website SEO Overhaul', servicesUsedIds: ['serv_02', 'serv_03', 'serv_04'] },
        ];

        const initialTestimonials = [
            { id: 'test_01', serviceId: 'serv_01', author: 'John S., Liquor Store Owner', rating: 5, comment: "The mobile app NJPourDigital built for us is incredible. Our regulars love the AI recommendations, and we've seen a real increase in sales." },
            { id: 'test_02', serviceId: 'serv_02', author: 'Maria G., Restaurant Proprietor', rating: 5, comment: "Their content strategy gave our restaurant a consistent, professional voice online. We're busier than ever, and I know their work is a big reason why." },
        ];

        // --- Main App Component ---
        function SyncedApp() {
            const [services, setServices] = useState(initialServices);
            const [caseStudies, setCaseStudies] = useState(initialCaseStudies);
            const [testimonials, setTestimonials] = useState(initialTestimonials);

            const addService = (newService) => setServices(current => [...current, newService]);
            const addCaseStudy = (newCaseStudy) => setCaseStudies(current => [...current, newCaseStudy]);
            const addTestimonial = (newTestimonial) => setTestimonials(current => [...current, newTestimonial]);

            return (
                <div className="flex flex-col md:flex-row w-full min-h-screen bg-gray-200">
                    <div className="w-full md:w-1/2 p-4 border-r border-gray-300 bg-gray-100">
                       <AdminDashboard services={services} caseStudies={caseStudies} testimonials={testimonials} onAddService={addService} onAddCaseStudy={addCaseStudy} />
                    </div>
                    <div className="w-full md:w-1/2 p-4 flex justify-center items-start">
                        <div className="w-full max-w-lg mx-auto bg-gray-50 text-gray-900 font-sans flex flex-col shadow-2xl rounded-lg h-[95vh]">
                           <PortfolioApp services={services} caseStudies={caseStudies} testimonials={testimonials} onAddTestimonial={addTestimonial} />
                        </div>
                    </div>
                </div>
            );
        }

        // =================================================================
        // ADMIN DASHBOARD COMPONENTS
        // =================================================================
        const AdminDashboard = ({ services, caseStudies, testimonials, onAddService, onAddCaseStudy }) => {
            const [activeTab, setActiveTab] = useState('services');
            const [isServiceModalOpen, setIsServiceModalOpen] = useState(false);
            const [isCaseStudyModalOpen, setIsCaseStudyModalOpen] = useState(false);

            const AdminTab = ({ tabName, label, count }) => (
                <button onClick={() => setActiveTab(tabName)} className={`px-4 py-2 text-sm font-medium rounded-md ${activeTab === tabName ? 'bg-amber-600 text-white' : 'text-gray-600 hover:bg-gray-200'}`}>
                    {label} <span className="ml-1 bg-gray-200 text-gray-700 text-xs font-semibold px-2 py-0.5 rounded-full">{count}</span>
                </button>
            );

            return (
                <div className="h-full flex flex-col">
                    <header className="bg-white shadow-sm mb-6 rounded-lg p-4">
                        <div className="flex justify-between items-center">
                            <div><h1 className="text-2xl font-bold text-gray-900">NJPourDigital</h1><p className="text-sm text-gray-500">Agency Content Management</p></div>
                            <div className="flex items-center space-x-2 text-sm text-green-600 bg-green-100 px-3 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-4 h-4"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg><span>Live Sync Active</span></div>
                        </div>
                    </header>
                    <div className="mb-4 px-1 flex justify-between items-center">
                         <div className="flex space-x-2"><AdminTab tabName="services" label="A La Carte" count={services.length} /><AdminTab tabName="caseStudies" label="Case Studies" count={caseStudies.length} /><AdminTab tabName="testimonials" label="Testimonials" count={testimonials.length} /></div>
                         {activeTab === 'services' && <button onClick={() => setIsServiceModalOpen(true)} className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="w-5 h-5 mr-2"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>Add Service</button>}
                         {activeTab === 'caseStudies' && <button onClick={() => setIsCaseStudyModalOpen(true)} className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" className="w-5 h-5 mr-2"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>Add Case Study</button>}
                    </div>
                    <div className="flex-grow bg-white shadow overflow-hidden sm:rounded-lg overflow-y-auto">
                        {activeTab === 'services' && <ServicesTable services={services} />}
                        {activeTab === 'caseStudies' && <CaseStudiesTable caseStudies={caseStudies} />}
                        {activeTab === 'testimonials' && <TestimonialsTable testimonials={testimonials} services={services} />}
                    </div>
                    {isServiceModalOpen && <AddServiceModal onAddService={onAddService} onClose={() => setIsServiceModalOpen(false)} />}
                    {isCaseStudyModalOpen && <AddCaseStudyModal onAddCaseStudy={onAddCaseStudy} services={services} onClose={() => setIsCaseStudyModalOpen(false)} />}
                </div>
            );
        };
        
        // --- Admin Table Components ---
        const ServicesTable = ({ services }) => (
            <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50 sticky top-0"><tr><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service Name</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Starting Price</th></tr></thead>
                <tbody className="bg-white divide-y divide-gray-200">{services.map(s => (<tr key={s.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{s.name}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{s.category}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${s.price.toLocaleString()}{s.priceType === 'monthly' ? '/mo' : ''}</td></tr>))}</tbody>
            </table>
        );
        
        const CaseStudiesTable = ({ caseStudies }) => (
            <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50 sticky top-0"><tr><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Project Name</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Services Used</th></tr></thead>
                <tbody className="bg-white divide-y divide-gray-200">{caseStudies.map(cs => (<tr key={cs.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{cs.name}</td><td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{cs.servicesUsedIds.length}</td></tr>))}</tbody>
            </table>
        );

        const TestimonialsTable = ({ testimonials, services }) => (
             <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50 sticky top-0"><tr><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Testimonial</th><th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rating</th></tr></thead>
                <tbody className="bg-white divide-y divide-gray-200">{testimonials.map(t => { const service = services.find(s => s.id === t.serviceId); return (<tr key={t.id}><td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{service ? service.name : 'N/A'}</td><td className="px-6 py-4"><div className="text-sm text-gray-900">{t.comment}</div><div className="text-xs text-gray-500">- {t.author}</div></td><td className="px-6 py-4 whitespace-nowrap text-sm text-amber-500">{'★'.repeat(t.rating)}{'☆'.repeat(5-t.rating)}</td></tr>); })}</tbody>
            </table>
        );

        // --- Admin Modal Components ---
        const AddServiceModal = ({ onAddService, onClose }) => {
            const handleSubmit = (e) => { e.preventDefault(); onAddService({ id: `serv_${Date.now()}`, name: e.target.serviceName.value, category: e.target.serviceCategory.value, price: parseFloat(e.target.servicePrice.value), priceType: e.target.priceType.value, imageUrl: 'https://placehold.co/400x400/7f7f7f/FFFFFF?text=New', description: 'Newly added service.' }); onClose(); };
            return (<div className="modal active fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full flex items-center justify-center z-50"><div className="relative mx-auto p-8 border w-full max-w-lg shadow-lg rounded-md bg-white"><h3 className="text-2xl font-bold mb-6">Add New A La Carte Service</h3><form onSubmit={handleSubmit}><div className="space-y-4"><div><label className="block text-sm font-medium text-gray-700">Service Name</label><input type="text" name="serviceName" required className="input" /></div><div><label className="block text-sm font-medium text-gray-700">Category</label><input type="text" name="serviceCategory" required className="input" /></div><div><label className="block text-sm font-medium text-gray-700">Price</label><input type="number" name="servicePrice" step="100" required className="input" /></div><div><label className="block text-sm font-medium text-gray-700">Price Type</label><select name="priceType" className="input"><option value="project">Project-Based</option><option value="monthly">Monthly</option></select></div></div><div className="mt-8 flex justify-end space-x-4"><button type="button" onClick={onClose} className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancel</button><button type="submit" className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg">Save Service</button></div></form></div></div>);
        };

        const AddCaseStudyModal = ({ onAddCaseStudy, services, onClose }) => {
            const [selectedServices, setSelectedServices] = useState([]);
            const handleServiceToggle = (serviceId) => { setSelectedServices(current => current.includes(serviceId) ? current.filter(id => id !== serviceId) : [...current, serviceId]); };
            const handleSubmit = (e) => { e.preventDefault(); onAddCaseStudy({ id: `cs_${Date.now()}`, name: e.target.csName.value, description: e.target.csDesc.value, process: e.target.csProcess.value, imageUrl: 'https://placehold.co/600x400/9ca3af/FFFFFF?text=New+Project', servicesUsedIds: selectedServices }); onClose(); };
            return (<div className="modal active fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full flex items-center justify-center z-50"><div className="relative mx-auto p-8 border w-full max-w-2xl shadow-lg rounded-md bg-white"><h3 className="text-2xl font-bold mb-6">Add New Case Study</h3><form onSubmit={handleSubmit}><div className="space-y-4"><div><label className="block text-sm font-medium">Project Name</label><input type="text" name="csName" required className="input" /></div><div><label className="block text-sm font-medium">Description</label><input type="text" name="csDesc" required className="input" /></div><div><label className="block text-sm font-medium">Process</label><textarea name="csProcess" required rows="3" className="input"></textarea></div><div><label className="block text-sm font-medium mb-2">Services Used</label><div className="max-h-40 overflow-y-auto border rounded-md p-2 grid grid-cols-2 gap-2">{services.map(s => (<div key={s.id} className="flex items-center"><input type="checkbox" id={`serv-check-${s.id}`} checked={selectedServices.includes(s.id)} onChange={() => handleServiceToggle(s.id)} className="h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500" /><label htmlFor={`serv-check-${s.id}`} className="ml-2 block text-sm text-gray-900">{s.name}</label></div>))}</div></div></div><div className="mt-8 flex justify-end space-x-4"><button type="button" onClick={onClose} className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancel</button><button type="submit" className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg">Save Case Study</button></div></form></div></div>);
        };
        
        // =================================================================
        // PORTFOLIO APP COMPONENTS
        // =================================================================
        const PortfolioApp = ({ services, caseStudies, testimonials, onAddTestimonial }) => {
            const [currentPage, setCurrentPage] = useState('home');
            const [selectedId, setSelectedId] = useState(null); // Can be service or case study ID
            const [modal, setModal] = useState({ type: null, isOpen: false }); // type: 'gemini', 'testimonial'

            const navigate = (page, id = null) => { setCurrentPage(page); setSelectedId(id); };

            const callGeminiApi = async (prompt, title) => {
                setModal({ type: 'gemini', isOpen: true, title, content: '✨ Generating...' });
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                    const result = await response.json();
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) { setModal({ type: 'gemini', isOpen: true, title, content: result.candidates[0].content.parts[0].text });
                    } else { throw new Error("Unexpected API response structure."); }
                } catch (error) { console.error("Gemini API call failed:", error); setModal({ type: 'gemini', isOpen: true, title, content: 'Sorry, the AI is currently unavailable.' }); }
            };
            
            const renderPage = () => {
                const pageKey = `${currentPage}-${selectedId || ''}`;
                switch (currentPage) {
                    case 'services': return <ServicesPage key={pageKey} navigate={navigate} services={services} packages={initialPackages} />;
                    case 'case-studies': return <CaseStudiesPage key={pageKey} navigate={navigate} callGeminiApi={callGeminiApi} caseStudies={caseStudies} />;
                    case 'contact': return <ContactPage key={pageKey} />;
                    case 'service-detail': return <ServiceDetailPage key={pageKey} serviceId={selectedId} navigate={navigate} services={services} testimonials={testimonials} callGeminiApi={callGeminiApi} setModal={setModal} />;
                    case 'case-study-detail': return <CaseStudyDetailPage key={pageKey} caseStudyId={selectedId} navigate={navigate} caseStudies={caseStudies} services={services} />;
                    default: return <HomePage key={pageKey} navigate={navigate} services={services} caseStudies={caseStudies} />;
                }
            };

            return (
                <div className="flex flex-col h-full bg-gray-50">
                    <PortfolioHeader navigate={navigate} currentPage={currentPage} />
                    <main className="flex-grow overflow-y-auto relative"><div className="animate-page-in">{renderPage()}</div></main>
                    {modal.isOpen && modal.type === 'gemini' && <GeminiModal modal={modal} setModal={setModal} />}
                    {modal.isOpen && modal.type === 'testimonial' && <AddTestimonialModal serviceId={selectedId} onAddTestimonial={onAddTestimonial} onClose={() => setModal({isOpen: false})} />}
                </div>
            );
        };
        
        const PortfolioHeader = ({ navigate, currentPage }) => {
            const NavButton = ({ page, icon, label }) => (
                <button title={label} className={`p-2 rounded-full transition-colors ${currentPage === page ? 'text-amber-600 bg-amber-100' : 'text-gray-500 hover:bg-gray-100'}`} onClick={() => navigate(page)}>{icon}</button>
            );
            
            return (
            <header className="bg-white border-b border-gray-200 p-4 sticky top-0 z-20"><div className="flex justify-between items-center">
                <div className="cursor-pointer flex items-center gap-2" onClick={() => navigate('home')}>
                    <img 
                        src="https://i.ibb.co/DHHsmRkn/NJ-pour-canva-gold-large-tag-final.png" 
                        alt="NJPourDigital Logo" 
                        className="h-10 flex-shrink-0"
                        onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/40x40/f0f0f0/333?text=Logo'; }}
                    />
                    <span className="font-bold text-lg text-[#0d1f3c]" style={{fontFamily: "'Playfair Display', serif"}}>NJPourDigital</span>
                </div>
                <nav className="flex space-x-2 sm:space-x-4">
                    <NavButton page='home' label="Home" icon={<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>} />
                    <NavButton page='services' label="Services" icon={<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z"/><path d="M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h2Z"/></svg>} />
                    <NavButton page='case-studies' label="Case Studies" icon={<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>} />
                    <NavButton page='contact' label="Contact" icon={<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>} />
                </nav>
            </div></header>
            );
        };

        const HomePage = ({ navigate, services, caseStudies }) => {
            const ServiceCard = ({ service }) => (<div className="bg-white rounded-2xl p-3 border border-gray-200 cursor-pointer w-40 flex-shrink-0" onClick={() => navigate('service-detail', service.id)}><img src={service.imageUrl} alt={service.name} className="rounded-lg w-full h-32 object-cover mb-3" /><p className="font-bold text-sm truncate">{service.name}</p><p className="text-xs text-gray-500">{service.category}</p><p className="font-bold text-md mt-1">From ${service.price.toLocaleString()}</p></div>);
            const CaseStudyCard = ({ caseStudy }) => (<div onClick={() => navigate('case-study-detail', caseStudy.id)} className="bg-white p-3 rounded-2xl border flex items-center space-x-4 cursor-pointer hover:bg-gray-50"><img src={caseStudy.imageUrl} alt={caseStudy.name} className="w-20 h-20 rounded-lg object-cover" /><div><h3 className="font-bold text-md">{caseStudy.name}</h3><p className="text-gray-600 text-sm">{caseStudy.description}</p></div></div>);
            return (<div className="p-6 space-y-8"><div><p className="text-3xl font-extrabold text-gray-900">Grow Your Brand.</p><p className="text-md text-gray-500">Welcome to NJPourDigital, your local partner in digital marketing innovation.</p></div><div className="bg-[#0d1f3c] text-white p-5 rounded-2xl shadow-lg text-center cursor-pointer" onClick={() => navigate('contact')}><p className="text-2xl font-bold">Let's Build Together</p><p className="text-sm font-medium opacity-80 mt-1">Have a project in mind? We'd love to hear about it. Schedule a free consultation today.</p></div><div><h2 className="text-xl font-bold mb-4">A La Carte Services</h2><div className="flex space-x-4 overflow-x-auto pb-4 -mx-6 px-6">{services.map(s => <ServiceCard key={s.id} service={s} />)}</div></div><div><h2 className="text-xl font-bold mb-4">Our Work</h2><div className="space-y-3">{caseStudies.map(cs => <CaseStudyCard key={cs.id} caseStudy={cs} />)}</div></div></div>);
        };

        const ServicesPage = ({ navigate, services, packages }) => (
            <div className="p-6 space-y-8">
                <div>
                    <h1 className="text-4xl font-extrabold mb-2">Our Packages</h1>
                    <p className="text-gray-600">Comprehensive solutions to fuel your growth at any stage.</p>
                </div>
                <div className="grid grid-cols-1 gap-6">
                    {packages.map(pkg => (
                        <div key={pkg.id} className={`p-5 rounded-2xl border ${pkg.color}`}>
                            <h3 className={`font-bold text-xl ${pkg.textColor}`}>{pkg.name}</h3>
                            <p className={`text-sm font-medium mb-3 ${pkg.textColor} opacity-80`}>{pkg.tagline}</p>
                            <p className="text-3xl font-extrabold text-gray-900 mb-4">${pkg.price.toLocaleString()}<span className="text-base font-medium text-gray-600">/month</span></p>
                            <ul className="space-y-2 mb-5">
                                {pkg.features.map((feature, i) => (
                                    <li key={i} className="flex items-center text-sm"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className={`w-4 h-4 mr-2 flex-shrink-0 ${pkg.textColor}`} viewBox="0 0 16 16"><path d="M12.736 4.264a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L5 11.293l6.736-6.736z"/></svg>{feature}</li>
                                ))}
                            </ul>
                            <button onClick={() => navigate('contact')} className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-xl">Get Started</button>
                        </div>
                    ))}
                </div>
                <div>
                    <h2 className="text-3xl font-extrabold mb-4 mt-8">A La Carte Services</h2>
                    <div className="grid grid-cols-2 gap-4">{services.map(s => (<div key={s.id} className="bg-white rounded-2xl p-3 border border-gray-200 cursor-pointer transition-transform hover:-translate-y-1" onClick={() => navigate('service-detail', s.id)}><img src={s.imageUrl} alt={s.name} className="rounded-lg w-full h-32 object-cover mb-3" /><p className="font-bold text-md">{s.name}</p><p className="text-sm text-gray-500">{s.category}</p><p className="font-bold text-lg mt-2">From ${s.price.toLocaleString()}</p></div>))}</div>
                </div>
            </div>
        );
        
        const CaseStudiesPage = ({ navigate, callGeminiApi, caseStudies }) => {
            const [businessType, setBusinessType] = useState('');
            const handleGenerate = () => { if (!businessType.trim()) return; const prompt = `Generate a creative marketing campaign idea for a ${businessType}. Include a catchy slogan, three distinct social media post ideas (for Instagram, Facebook, and TikTok), and one unique promotional event idea. Format the response as simple text with clear headings.`; callGeminiApi(prompt, 'Your Custom Marketing Plan'); };
            return (<div className="p-6 space-y-8"><h1 className="text-4xl font-extrabold">Case Studies</h1><div><h2 className="text-2xl font-bold mb-4">Our Work</h2><div className="space-y-4">{caseStudies.map(cs => (<div key={cs.id} onClick={() => navigate('case-study-detail', cs.id)} className="bg-white p-3 rounded-2xl border flex items-center space-x-4 cursor-pointer hover:bg-gray-50"><img src={cs.imageUrl} alt={cs.name} className="w-24 h-24 rounded-lg object-cover" /><div><h3 className="font-bold text-lg">{cs.name}</h3><p className="text-gray-600 text-sm">{cs.description}</p></div></div>))}</div></div><div className="bg-white p-5 rounded-2xl border border-gray-200"><div className="flex items-center mb-2"><span className="text-2xl mr-2">✨</span><h3 className="text-2xl font-bold">AI Idea Generator</h3></div><p className="text-gray-600 mb-4">Need inspiration? Tell our AI your business type and get a custom marketing idea in seconds.</p><input value={businessType} onChange={(e) => setBusinessType(e.target.value)} className="w-full border border-gray-300 rounded-lg p-2 text-sm" placeholder="e.g., local coffee shop, online clothing store" /><button onClick={handleGenerate} className="mt-3 bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-4 rounded-xl w-full">Generate Marketing Idea</button></div></div>);
        };
        
        const ContactPage = () => {
            const [formStatus, setFormStatus] = useState(''); // '', 'submitting', 'success', 'error'
            const [formData, setFormData] = useState({ name: '', email: '', message: '' });

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setFormStatus('submitting');

                const endpoint = 'https://formspree.io/f/mgvzpjge'; 

                try {
                    const response = await fetch(endpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData),
                    });

                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    
                    setFormStatus('success');
                } catch (error) {
                    console.error('Form submission error:', error);
                    setFormStatus('error');
                }
            };

            return (
                <div className="p-6 space-y-6">
                    <h1 className="text-4xl font-extrabold">Contact Us</h1>
                    <p className="text-gray-600">Ready to start your project? Fill out the form below or get in touch directly.</p>
                    
                    {formStatus === 'success' ? (
                        <div className="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md" role="alert">
                            <p className="font-bold">Message Sent!</p>
                            <p>Thank you for reaching out. We'll be in touch shortly.</p>
                        </div>
                    ) : (
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Your Name</label>
                                <input type="text" name="name" value={formData.name} onChange={handleInputChange} required className="input" disabled={formStatus === 'submitting'} />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Your Email</label>
                                <input type="email" name="email" value={formData.email} onChange={handleInputChange} required className="input" disabled={formStatus === 'submitting'} />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700">Tell us about your project</label>
                                <textarea name="message" value={formData.message} onChange={handleInputChange} required rows="5" className="input" disabled={formStatus === 'submitting'}></textarea>
                            </div>
                            <div>
                                <button type="submit" className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center disabled:bg-amber-400" disabled={formStatus === 'submitting'}>
                                    {formStatus === 'submitting' ? 'Sending...' : 'Send Inquiry'}
                                </button>
                            </div>
                            {formStatus === 'error' && (
                                <div className="text-red-600 bg-red-100 p-3 rounded-md text-sm text-center mt-4">
                                    <p className="font-bold">Submission Failed</p>
                                    <p>Sorry, something went wrong. Please try again later or contact us directly via email.</p>
                                </div>
                            )}
                        </form>
                    )}

                    <div className="text-center text-gray-500 space-y-2 pt-4">
                        <p>Email us at: <a href="mailto:contact@njpourdigital.com" className="text-amber-600 font-semibold">contact@njpourdigital.com</a></p>
                        <p>Call us at: <a href="tel:732-443-0935" className="text-amber-600 font-semibold">732-443-0935</a></p>
                    </div>
                </div>
            );
        };

        const ServiceDetailPage = ({ serviceId, navigate, services, testimonials, callGeminiApi, setModal }) => {
            const service = services.find(s => s.id === serviceId);
            const serviceTestimonials = useMemo(() => testimonials.filter(t => t.serviceId === serviceId), [testimonials, serviceId]);
            if (!service) return <div className="p-6">Service not found.</div>;
            const handleGenerateIdeas = () => { const prompt = `I'm interested in the "${service.name}" service. Generate three creative ideas for how a small business (like a local cafe) could use this service to grow. Be specific and actionable. Format the response as a simple, easy-to-read list.`; callGeminiApi(prompt, `Ideas for ${service.name}`); };
            return (<div className="flex flex-col h-full"><main className="flex-grow overflow-y-auto"><div className="relative"><img src={service.imageUrl.replace('400x400', '800x600')} alt={service.name} className="w-full h-60 object-cover" /><button className="absolute top-4 left-4 bg-white/80 p-2 rounded-full z-10" onClick={() => navigate('services')}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg></button></div><div className="p-6 space-y-6"><h1 className="text-3xl font-extrabold flex-1 pr-4">{service.name}</h1><p className="text-gray-600">{service.description}</p><button className="w-full bg-[#0d1f3c] text-white font-bold py-3 px-4 rounded-xl flex items-center justify-center" onClick={handleGenerateIdeas}><span className="text-lg mr-2">✨</span> AI Strategy Brainstorm</button><div><div className="flex justify-between items-center mb-4"><h2 className="text-2xl font-bold">Testimonials</h2><button onClick={() => setModal({type: 'testimonial', isOpen: true})} className="text-sm font-semibold text-amber-600 hover:text-amber-700">Leave a Review</button></div><div className="space-y-4">{serviceTestimonials.length > 0 ? serviceTestimonials.map(t => (<div key={t.id} className="bg-white border rounded-lg p-4"><div className="flex justify-between items-center mb-1"><p className="font-bold">{t.author}</p><p className="text-amber-500">{'★'.repeat(t.rating)}{'☆'.repeat(5-t.rating)}</p></div><p className="text-gray-600">{t.comment}</p></div>)) : <p className="text-gray-500 text-sm">No testimonials for this service yet.</p>}</div></div></div></main><footer className="p-4 bg-white border-t border-gray-200 sticky bottom-0 z-10"><div className="flex items-center justify-between"><p className="text-3xl font-extrabold">From ${service.price.toLocaleString()}<span className="text-base font-medium text-gray-600">{service.priceType === 'monthly' ? '/mo' : ''}</span></p><button onClick={() => navigate('contact')} className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-xl">Request a Quote</button></div></footer></div>);
        };

        const CaseStudyDetailPage = ({ caseStudyId, navigate, caseStudies, services }) => {
            const caseStudy = caseStudies.find(cs => cs.id === caseStudyId);
            const servicesUsed = useMemo(() => caseStudy ? caseStudy.servicesUsedIds.map(id => services.find(s => s.id === id)).filter(Boolean) : [], [caseStudy, services]);
            if (!caseStudy) return <div className="p-6">Case Study not found.</div>;

            return (<div className="flex flex-col h-full"><main className="flex-grow overflow-y-auto"><div className="relative"><img src={caseStudy.imageUrl} alt={caseStudy.name} className="w-full h-60 object-cover" /><button className="absolute top-4 left-4 bg-white/80 p-2 rounded-full z-10" onClick={() => navigate('case-studies')}><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="w-6 h-6"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg></button></div><div className="p-6 space-y-6"><h1 className="text-3xl font-extrabold">{caseStudy.name}</h1><div><h2 className="text-xl font-bold mb-2">Services Utilized</h2><div className="space-y-2">{servicesUsed.map(s => (<div key={s.id} onClick={() => navigate('service-detail', s.id)} className="flex justify-between items-center bg-white p-3 rounded-lg border cursor-pointer hover:bg-gray-50"><p className="font-medium">{s.name}</p><span className="text-xs font-semibold text-amber-700">Learn More &rarr;</span></div>))}</div></div><div><h2 className="text-xl font-bold mb-2">Our Process</h2><p className="text-gray-600 whitespace-pre-wrap">{caseStudy.process}</p></div></div></main><footer className="p-4 bg-white border-t border-gray-200 sticky bottom-0 z-10"><button onClick={() => navigate('contact')} className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-xl">Start a Similar Project</button></footer></div>);
        };
        
        // --- Portfolio Modal Components ---
        const AddTestimonialModal = ({ serviceId, onAddTestimonial, onClose }) => {
            const [rating, setRating] = useState(0);
            const handleSubmit = (e) => { e.preventDefault(); onAddTestimonial({ id: `test_${Date.now()}`, serviceId, author: e.target.author.value || 'Anonymous', rating: rating, comment: e.target.comment.value }); onClose(); };
            return (<div className="modal active fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4" onClick={onClose}><div className="bg-white p-6 rounded-2xl w-full max-w-md text-left" onClick={(e) => e.stopPropagation()}><h3 className="text-2xl font-bold mb-4">Leave a Testimonial</h3><p className="text-sm text-gray-500 mb-4">(This is a demo feature for your future clients!)</p><form onSubmit={handleSubmit}><div className="space-y-4"><div className="star-rating flex flex-row-reverse justify-end" onMouseLeave={() => setRating(rating)}>{[5, 4, 3, 2, 1].map(star => (<React.Fragment key={star}><input type="radio" id={`star${star}`} name="rating" value={star} checked={rating === star} onChange={() => setRating(star)} /><label htmlFor={`star${star}`} onMouseEnter={() => setRating(star)}>☆</label></React.Fragment>))}</div><div><label className="block text-sm font-medium">Your Name (Optional)</label><input type="text" name="author" className="input" /></div><div><label className="block text-sm font-medium">Your Feedback</label><textarea name="comment" required rows="4" className="input"></textarea></div></div><div className="mt-6 flex justify-end space-x-4"><button type="button" onClick={onClose} className="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">Cancel</button><button type="submit" className="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg">Submit</button></div></form></div></div>);
        };

        const GeminiModal = ({ modal, setModal }) => (
            <div className="modal active fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4" onClick={() => setModal({ ...modal, isOpen: false })}>
                <div className="bg-white p-6 rounded-2xl w-full max-w-md text-left" onClick={(e) => e.stopPropagation()}>
                    <h3 className="text-xl font-bold mb-4">{modal.title}</h3>
                    <div className="text-gray-600 mb-6 max-h-80 overflow-y-auto whitespace-pre-wrap" dangerouslySetInnerHTML={{ __html: modal.content.replace(/\n/g, '<br />').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') }}></div>
                    <button className="bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg w-full" onClick={() => setModal({ ...modal, isOpen: false })}>Close</button>
                </div>
            </div>
        );

        // --- Render the main app ---
        // Hide splash screen after a delay
        setTimeout(() => {
            const splash = document.getElementById('splash-screen');
            if (splash) {
                splash.classList.add('hidden');
            }
        }, 2000); // 2 seconds

        const root = ReactDOM.createRoot(document.getElementById('app-root'));
        root.render(React.createElement(SyncedApp));
    </script>
</body>
</html>
